<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#eef2ff" />
    <link rel="manifest" href="manifest.webmanifest" />
    <script src="seed-data.js"></script>
    <title>SmartSave ‚Äì Home</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="theme-polish.css" />
  </head>
  <body class="dashboard app-page" data-page="home" data-mvp>
    <div class="dashboard-shell app-shell">
      <header class="dashboard-header app-header">
        <div class="brand-block">
          <a class="logo" href="mon-argent.html">
            <div class="logo-mark" aria-hidden="true">S</div>
            <span class="logo-text">SmartSave</span>
          </a>
          <span class="logo-subtitle">Personal Finance</span>
        </div>

        <div class="header-search">
          <span class="header-search__icon" aria-hidden="true">üîç</span>
          <input class="header-search__input" type="search" placeholder="Rechercher" aria-label="Rechercher">
        </div>
        <div class="header-actions">
          <div class="user-menu-wrapper">
            <button class="user-pill user-pill--account" type="button" aria-haspopup="true" aria-expanded="false">
              <span class="user-avatar user-avatar--icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-3.3 0-6 1.6-6 3.5V19h12v-1.5c0-1.9-2.7-3.5-6-3.5z" fill="currentColor" />
                </svg>
              </span>
              <span class="user-info">
                <span class="user-name">Marie Dupont</span>
                <span class="user-email">marie@example.ch</span>
              </span>
              <svg class="chevron" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M7 10l5 5 5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
              </svg>
            </button>
            <div class="user-menu" role="menu" aria-label="Menu Mon compte">
              <div class="user-menu__header">
                <strong data-user-name>Marie Dupont</strong>
                <span data-user-email>marie@example.ch</span>
              </div>
              <a class="user-menu-link" href="mes-depenses.html">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M4 6h16M4 12h16M4 18h10" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
                </svg>
                <span>Mes d√©penses</span>
              </a>
              <button type="button" data-user-action="edit">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M12 8.5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7zm8 3.5-1.9-.3a6.8 6.8 0 0 0-.7-1.7l1.1-1.6-1.4-1.4-1.6 1.1c-.5-.3-1.1-.6-1.7-.7L12 4l-1.8 1.9c-.6.1-1.2.4-1.7.7L6.9 5.5 5.5 6.9l1.1 1.6c-.3.5-.6 1.1-.7 1.7L4 12l1.9 1.8c.1.6.4 1.2.7 1.7l-1.1 1.6 1.4 1.4 1.6-1.1c.5.3 1.1.6 1.7.7L12 20l1.8-1.9c.6-.1 1.2-.4 1.7-.7l1.6 1.1 1.4-1.4-1.1-1.6c.3-.5.6-1.1.7-1.7L20 12z" fill="currentColor" />
                </svg>
                <span>Mes donn√©es</span>
              </button>
              <button type="button" data-user-action="logout" class="danger">
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M15 6h-2V4h2a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-2v-2h2a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM4 12l4-4v3h7v2H8v3z" fill="currentColor" />
                </svg>
                <span>D√©connexion</span>
              </button>
            </div>
          </div>
          <div class="hamburger-wrapper">
            <button class="icon-button menu-button" type="button" aria-label="Menu" aria-expanded="false" aria-controls="app-nav">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 7h16M4 12h16M4 17h16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
            <div class="hamburger-menu" id="app-nav" role="menu" aria-label="Navigation principale">
              <a class="hamburger-link" role="menuitem" href="mon-argent.html" data-nav="home">Home</a>
              <a class="hamburger-link" role="menuitem" href="smartsave.html" data-nav="smartsave">SmartSave</a>
              <a class="hamburger-link" role="menuitem" href="actions.html" data-nav="actions">Actions</a>
              <a class="hamburger-link" role="menuitem" href="future.html" data-nav="future">Future</a>
              <a class="hamburger-link" role="menuitem" href="score.html" data-nav="score">Score</a>
            </div>
          </div>
        </div>
      </header>

      <main class="app-main home-monthly">
        <section class="page-title page-title--month">
          <h1 id="home-month-title" data-month-label>Suivi mois ‚Äî</h1>
          <div class="month-controls" data-month-controls hidden>
            <button class="month-btn month-btn--close" type="button" data-close-month hidden>
              üîí Cl√¥turer ce mois
            </button>
            <button class="month-btn month-btn--start" type="button" data-start-month hidden>
              ‚ñ∂Ô∏è D√©marrer le nouveau mois
            </button>
          </div>
        </section>

        <nav class="tab-nav" aria-label="Sections de la page mon argent">
          <button
            type="button"
            class="is-active"
            data-tab-target="depenses"
            aria-selected="true"
          >
            Mes d√©penses
          </button>
          <button type="button" data-tab-target="comptes" aria-selected="false">Mes comptes</button>
        </nav>

        <section data-tab-panel="depenses">
          <section class="card remaining-card">
          <h3 data-home-variable-title>D√©penses variables - ‚Äî</h3>
          <div class="remaining-headline">
            <div class="remaining-amount" data-home-remaining>0 / 0 CHF</div>
            <button
              class="remaining-edit-link"
              type="button"
              data-variable-budget-toggle
              aria-expanded="false"
              aria-controls="variable-budget-panel"
            >
              <span class="remaining-edit-link__icon" aria-hidden="true">
                <svg viewBox="0 0 24 24">
                  <path d="M4 20h4l10-10-4-4L4 16v4zm12.7-13.3 1.6-1.6a1 1 0 0 1 1.4 0l1.6 1.6a1 1 0 0 1 0 1.4l-1.6 1.6-3-3z" fill="none" stroke="currentColor" stroke-width="1.7" stroke-linejoin="round" />
                </svg>
              </span>
              <span>Modifier</span>
            </button>
          </div>
          <section class="variable-budget-panel" id="variable-budget-panel" data-variable-budget-panel hidden>
            <h4>Objectif des d√©penses variables</h4>
            <label class="variable-budget-option">
              <input type="radio" name="variable-budget-mode" value="recommended" />
              <div class="variable-budget-option__content">
                <p>Recommand√© par SmartSave</p>
                <strong data-variable-budget-option="recommended">‚Äî</strong>
                <small>Revenu net - charges fixes - imp√¥ts - s√©curit√© - 3e pilier - dettes</small>
              </div>
            </label>
            <label class="variable-budget-option">
              <input type="radio" name="variable-budget-mode" value="eco" />
              <div class="variable-budget-option__content">
                <p>√âco</p>
                <strong data-variable-budget-option="eco">‚Äî</strong>
                <small>-12% par rapport √† l'objectif SmartSave</small>
              </div>
            </label>
            <label class="variable-budget-option">
              <input type="radio" name="variable-budget-mode" value="comfort" />
              <div class="variable-budget-option__content">
                <p>Confort</p>
                <strong data-variable-budget-option="comfort">‚Äî</strong>
                <small>+12% par rapport √† l'objectif SmartSave</small>
              </div>
            </label>
            <label class="variable-budget-option">
              <input type="radio" name="variable-budget-mode" value="custom" />
              <div class="variable-budget-option__content">
                <p>Personnalis√©</p>
                <strong data-variable-budget-option="custom">Montant libre</strong>
                <small>D√©finis ton montant mensuel</small>
              </div>
            </label>
            <div class="variable-budget-custom" data-variable-budget-custom hidden>
              <label for="variable-budget-custom-input">Montant personnalis√© (CHF)</label>
              <input id="variable-budget-custom-input" type="number" min="0" step="10" data-variable-budget-custom-input />
            </div>
          </section>
          <div class="progress-bar" data-home-progress-bar>
            <div class="progress-bar__fill" data-home-progress-fill></div>
          </div>
          <p class="progress-caption" data-home-progress-caption>Il te reste 0 CHF √† d√©penser ce mois-ci.</p>
          </section>

          <section class="card projection-card" data-home-projection-card>
          <div class="projection-header">
            <div>
              <h3>Projection fin de mois</h3>
              <p class="projection-subtitle" data-home-projection-subtitle>‚Äî</p>
            </div>
            <div class="projection-highlight">
              <p class="projection-highlight__label">Pr√©vision</p>
              <p class="projection-highlight__value" data-home-projection-forecast>CHF 0</p>
            </div>
          </div>
          <div class="projection-rows">
            <div class="projection-row">
              <span>D√©penses variables actuelles</span>
              <strong data-home-projection-actual>CHF 0</strong>
            </div>
            <div class="projection-row">
              <span>Rythme / jour</span>
              <strong data-home-projection-pace>CHF 0</strong>
            </div>
            <div class="projection-row">
              <span>Budget variable SmartSave</span>
              <strong data-home-projection-budget>CHF 0</strong>
            </div>
            <div class="projection-row projection-row--delta">
              <span>√âcart vs budget</span>
              <strong data-home-projection-delta>CHF 0</strong>
            </div>
          </div>
          <div class="progress-bar projection-bar" data-home-projection-bar aria-hidden="true">
            <div class="progress-bar__fill" data-home-projection-bar-fill></div>
          </div>
          <p class="progress-caption" data-home-projection-caption>‚Äî</p>
          <div class="projection-status" data-home-projection-status>
            <span class="status-dot" aria-hidden="true"></span>
            <span data-home-projection-label>‚Äî</span>
          </div>
          <p class="projection-text" data-home-projection-message>‚Äî</p>
          <p class="projection-hint" data-home-projection-hint>‚Äî</p>
          </section>

          <section class="card quick-actions quick-actions--inline">
          <button class="quick-action quick-action--accent" type="button" data-quick-action="expense">
            <span class="quick-action__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24">
                <path d="M6 4h11l3 3v13H4V4z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
                <path d="M8 4v6h7V4" fill="none" stroke="currentColor" stroke-width="1.8" />
              </svg>
            </span>
            <span class="quick-action__label">Ajouter une d√©pense</span>
            <span class="quick-action__arrow" aria-hidden="true">
              <svg viewBox="0 0 24 24">
                <path d="M7 17L17 7M9 7h8v8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
          </button>
          <button class="quick-action quick-action--success" type="button" data-quick-action="income">
            <span class="quick-action__icon" aria-hidden="true">
              <svg viewBox="0 0 24 24">
                <path d="M4 17l5-6 4 4 7-8" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M4 20h16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
              </svg>
            </span>
            <span class="quick-action__label">Ajouter un revenu</span>
            <span class="quick-action__arrow" aria-hidden="true">
              <svg viewBox="0 0 24 24">
                <path d="M7 17L17 7M9 7h8v8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </span>
          </button>
          </section>

          <section class="card top-categories-card" data-top-categories-card>
          <div class="card-header top-categories-header">
            <h3>Tes d√©penses mensuelles</h3>
            <a class="top-categories-toggle" href="depenses.html">Voir le d√©tail</a>
          </div>
          <ul class="top-categories-list" data-top-categories-list></ul>
          <p class="top-categories-empty" data-top-categories-empty hidden>
            Aucune d√©pense enregistr√©e ce mois-ci.
          </p>
          </section>

        </section>

        <section data-tab-panel="comptes" hidden>
          <section class="card accounts-overview-card">
            <div class="card-header">
              <h3>Vue d‚Äôensemble</h3>
            </div>
            <div class="accounts-overview-hero" data-home-overview-card>
              <button
                class="accounts-overview-toggle"
                type="button"
                data-home-overview-toggle
                aria-label="Afficher patrimoine total en principal"
                title="Basculer l‚Äôindicateur principal"
              >
                <svg viewBox="0 0 24 24" aria-hidden="true">
                  <path d="M8 7l4-4 4 4M12 3v18M8 17l4 4 4-4" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </button>

              <article class="accounts-overview-primary">
                <p data-home-overview-primary-label>Total disponible</p>
                <strong data-home-overview-primary-value>CHF 0</strong>
                <small data-home-overview-primary-note>Compte courant en temps r√©el</small>
              </article>

              <article class="accounts-overview-secondary">
                <p data-home-overview-secondary-label>Patrimoine total</p>
                <strong data-home-overview-secondary-value>CHF 0</strong>
              </article>
            </div>
            <button class="account-transfer-btn" type="button" data-quick-action="transfer">
              <span aria-hidden="true">
                <svg viewBox="0 0 24 24">
                  <path d="M5 7h11M12 4l4 3-4 3M19 17H8m7-3-4 3 4 3" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
              </span>
              <span>Transf√©rer de l‚Äôargent</span>
            </button>
          </section>

          <section class="card accounts-overview-card">
            <div class="card-header">
              <h3>O√π est ton argent</h3>
            </div>
            <div class="accounts-overview-list" data-home-accounts></div>
          </section>

          <section class="card accounts-overview-card">
            <div class="card-header">
              <h3>Historique des transferts</h3>
            </div>
            <ul class="transfer-history-list" data-home-transfer-history></ul>
            <p class="transfer-history-empty" data-home-transfer-history-empty hidden>
              Aucun transfert enregistr√© pour le moment.
            </p>
          </section>
        </section>
      </main>
    </div>

    <div class="hub-modal" data-quick-modal>
      <div class="hub-modal__overlay" data-quick-close></div>
      <div class="hub-modal__content" role="dialog" aria-modal="true" aria-labelledby="quick-modal-title">
        <header class="hub-modal__header">
          <h2 id="quick-modal-title">Ajouter une op√©ration</h2>
          <button class="hub-modal__close" type="button" data-quick-close aria-label="Fermer">√ó</button>
        </header>
        <form class="hub-modal__form" data-quick-form>
          <div class="hub-field">
            <label for="quick-amount">Montant (CHF)</label>
            <input id="quick-amount" name="amount" type="number" min="0" step="1" placeholder="0" required />
          </div>
          <div class="hub-field" data-quick-field="category">
            <label for="quick-category">Cat√©gorie</label>
            <select id="quick-category" name="category">
              <option value="">S√©lectionner</option>
              <option value="Logement">Logement</option>
              <option value="Transport">Transport</option>
              <option value="Alimentation">Alimentation</option>
              <option value="Sant√©">Sant√©</option>
              <option value="Loisirs">Loisirs</option>
              <option value="Autre">Autre</option>
            </select>
            <input
              id="quick-category-other"
              name="categoryOther"
              type="text"
              placeholder="Nom de la d√©pense ou du revenu"
              data-quick-other="category"
              hidden
            />
          </div>
          <div class="hub-field" data-quick-field="account">
            <label for="quick-account">Compte</label>
            <select id="quick-account" name="account"></select>
            <input
              id="quick-account-other"
              name="accountOther"
              type="text"
              placeholder="Nom du compte"
              data-quick-other="account"
              hidden
            />
          </div>
          <div class="hub-field hub-field--inline" data-quick-field="transfer">
            <div>
              <label for="quick-from">Compte source</label>
              <select id="quick-from" name="from"></select>
            </div>
            <div>
              <label for="quick-to">Compte destination</label>
              <select id="quick-to" name="to"></select>
            </div>
          </div>
          <div class="hub-field">
            <label for="quick-date">Date</label>
            <input id="quick-date" name="date" type="date" required />
          </div>
          <div class="hub-field">
            <label for="quick-note">Note (optionnelle)</label>
            <input id="quick-note" name="note" type="text" placeholder="Ex: courses" />
          </div>
          <button class="cta hub-cta" type="submit">Enregistrer</button>
        </form>
      </div>
    </div>

    <nav class="bottom-nav" aria-label="Navigation principale">
      <a class="bottom-nav__link" href="mon-argent.html" data-nav="home">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 10.5l8-6 8 6v8a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        </svg>
        <span>Suivi</span>
      </a>
      <a class="bottom-nav__link" href="smartsave.html" data-nav="smartsave">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="12" r="8" fill="none" stroke="currentColor" stroke-width="1.8" />
          <circle cx="12" cy="12" r="3" fill="none" stroke="currentColor" stroke-width="1.8" />
        </svg>
        <span>SmartSave</span>
      </a>
      <a class="bottom-nav__link" href="actions.html" data-nav="actions">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M5 6h14M5 12h14M5 18h10" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" />
        </svg>
        <span>Actions</span>
      </a>
      <a class="bottom-nav__link" href="future.html" data-nav="future">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M4 16l5-5 4 3 7-7" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span>Future</span>
      </a>
      <a class="bottom-nav__link" href="score.html" data-nav="score">
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 3l2.5 5 5.5.8-4 3.9.9 5.5-4.9-2.6-4.9 2.6.9-5.5-4-3.9 5.5-.8z" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linejoin="round" />
        </svg>
        <span>Score</span>
      </a>
    </nav>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const title = document.getElementById("home-month-title");
        if (title && !title.textContent.trim()) {
          title.textContent = "Suivi mois ‚Äî";
        }

        const tabButtons = Array.from(document.querySelectorAll(".tab-nav [data-tab-target]"));
        const tabPanels = Array.from(document.querySelectorAll("[data-tab-panel]"));

        const activateTab = (target) => {
          tabButtons.forEach((button) => {
            const isActive = button.dataset.tabTarget === target;
            button.classList.toggle("is-active", isActive);
            button.setAttribute("aria-selected", String(isActive));
          });
          tabPanels.forEach((panel) => {
            panel.hidden = panel.dataset.tabPanel !== target;
          });
        };

        tabButtons.forEach((button) => {
          button.addEventListener("click", () => activateTab(button.dataset.tabTarget));
        });

        const requestedTab = new URLSearchParams(window.location.search).get("tab");
        if (requestedTab === "comptes" || requestedTab === "depenses") {
          activateTab(requestedTab);
        }

        localStorage.setItem("profileLastMain", "mon-argent.html");
      });
    </script>
    <script src="financialScoreEngine.js" defer></script>
    <script src="allocationEngine.js" defer></script>
    <script src="projectionEngine.js" defer></script>
    <script src="taxEngine.js" defer></script>
    <script src="spendingAnalysisEngine.js" defer></script>
    <script src="smartsaveSnapshot.js" defer></script>
    <script src="runtimeConfig.js" defer></script>
    <script src="mvp-v2.js" defer></script>
    <script src="mon-argent.js" defer></script>
    <script src="/dev-reload.js" defer></script>
</body>
</html>
